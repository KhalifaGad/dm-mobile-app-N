<Page actionBarHidden="{{ actionBarStatus.hidden }}" 
    xmlns="http://schemas.nativescript.org/tns.xsd" 
    xmlns:lv="nativescript-ui-listview" 
    xmlns:actionBar="components/actionBar" 
    xmlns:bottomNav="components/bottomNav"
    navigatingTo="onNavigatingTo"
    class="page"
    id="home-page">

    <Page.actionBar>
        <actionBar:ActionBar-component />
    </Page.actionBar>

    <AbsoluteLayout id="secondChild">
        <StackLayout top="30" left="36" orientation="vertical" class="app-headers">
            <Label horizontalAlignment="left" text="SEARCH" />
            <Label horizontalAlignment="left" class="bold" text="FOR MEDICIN" />
        </StackLayout>
        <StackLayout top="120" left="40" orientation="horizontal" class="search-stklayout">
            <!-- returnKeyType="Search" -->
            <TextField text="{{ viewModel.searchTxt }}" returnKeyType="Search" returnPress="search" hint="Find the medicine" class="search-txtfld" />
            <Button text="" src="res://fa_search" class="search-btn" tap="search" />
        </StackLayout>
        <Label text="{{ viewModel.areFetched }}" top="200" left="90" class="white bold" style="font-size: 18em" textWrap="true" />
        <Label text="{{ viewModel.areFetched  }}" top="220" left="90" class="white bold" style="font-size: 18em" textWrap="true" />
    
        <!--  -->
        
        <StackLayout id="items-container" top="250" left="0" orientation="vertical" class="home-items-stklayout">
            <ActivityIndicator
                    horizontalAlignment="center"
                    marginTop="139"
                    visibility="{{viewModel.activityIndecatorVis}}"
                    id="myIndicator"
                    busy="{{ viewModel.notFetched }}"
                    backgroundColor="transparent"
                    color="#FF3838" 
                    width="100" 
                    height="100" />
            <ScrollView
                clipToBounds="true"
                height="310"
                id="itemsScrollView"
                scrollBarIndicatorVisible="false">
                <StackLayout visibility="{{ viewModel.itemsViewVisiblit }}" height="310" id="itemsStackLayout" >
                    <ListView id="itemsListView" height="310" items="{{ viewModel.items }}" >
                        <ListView.itemTemplate>
                            <StackLayout orientation="horizontal" class="list-item" val="{{ $value }}">
                                <StackLayout orientation="vertical" horizontalAlignment="right" verticalAlignment="middle" class="drug-info-wrapper">
                                    <Label text="{{ $value.name }}" horizontalAlignment="left" class="drug-name" textWrap="false" width="90%" />
                                    <Label text="{{'Price per pack ' + $value.price + 'EGP' }}" horizontalAlignment="left" textWrap="true" />
                                </StackLayout>
                                <!-- <Image src="res://fa_angle_right" horizontalAlignment="right" style="horizontal-align:center;" verticalAlignment="middle" height="20vh" width="20vw" tap="toDrug" /> -->
                                <Button text="" tap="toDrug" class="to-drug-btn" />
                                
                            </StackLayout>
                        </ListView.itemTemplate>
                    </ListView>
                </StackLayout>
            </ScrollView>
        </StackLayout>
        <bottomNav:BottomNav-component top="579" left="0"/>
    </AbsoluteLayout>
</Page>
