<Page 
    id="drug-page"
    actionBarHidden="{{ actionBarStatus.hidden }}"
    xmlns="http://schemas.nativescript.org/tns.xsd"
	xmlns:actionBar="components/actionBar" 
	xmlns:bottomNav="components/bottomNav" navigatingTo="onNavigatingTo" class="page">
	<Page.actionBar>
		<actionBar:ActionBar-component />
	</Page.actionBar>

	<AbsoluteLayout id="secondChild">
		<Label top="30" left="24" class="bold app-headers" text="{{ navContext.drug.item }}" />
        <StackLayout top="100" left="24" class="item-headers-wrapper">
            <StackLayout orientation="horizontal" class="first-layer">
                <StackLayout orientation="vertical" horizontalAlignment="left" class="item-info-wrapper">
                    <StackLayout orientation="horizontal">
                        <Label text="Seller: " textWrap="true" />
                        <Label text="{{navContext.drug.seller}}" textWrap="true" class="bold" />
                    </StackLayout>
                    <StackLayout orientation="horizontal">
                        <Label text="Price: " textWrap="true" />
                        <Label text="{{navContext.drug.price + ' EGP'}}" textWrap="true" class="bold" />
                    </StackLayout>
                </StackLayout>
                <StackLayout class="header-discount-wrapper">
                    <Label horizontalAlignment="center" text="{{'- ' + navContext.drug.discount + '%'}}" />
                </StackLayout>
            </StackLayout>
            <StackLayout orientation="horizontal" class="second-layer" >
                <StackLayout orientation="horizontal" verticalAlignment="center" horizontalAlignment="left">
                    <Image horizontalAlignment="left" src="res://fa_plus_square" width="28vw" height="28vh"/>
                    <Label horizontalAlignment="right" verticalAlignment="center" text="Add To Cart" textWrap="true" class="bold white" />
                </StackLayout>
                <StackLayout orientation="horizontal" verticalAlignment="center" horizontalAlignment="right" class="deffered-state" >
                    <Label text="Deffered" textWrap="true" verticalAlignment="bottom" class="white bold" />
                    <StackLayout class="switch-wrapper" >
                        <Switch isEnabled="false" checked="{{navContext.drug.deferred}}" class="switch" width="45vw" />
                    </StackLayout>
                </StackLayout>
            </StackLayout>
        </StackLayout>
        <StackLayout id="items-container" top="280" left="0" orientation="vertical" class="home-items-stklayout">
            <ScrollView height="470vh" id="itemsScrollView" scrollBarIndicatorVisible="false">
                <Repeater items="{{ mvvmContext.items }}">
                    <Repeater.itemTemplate>
                        <StackLayout orientation="horizontal" class="list-item" tap="toDrug" val="{{ $value }}">
                            <StackLayout orientation="horizontal" class="drug-info-wrapper">
                                <StackLayout orientation="vertical" horizontalAlignment="right" verticalAlignment="middle" class="drug-name-price">
                                    <Label text="{{ $value.item }}" horizontalAlignment="left" class="drug-name" textWrap="true" />
                                    <Label text="{{'Price per pack ' + $value.price + 'EGP' }}" horizontalAlignment="left" textWrap="true" />
                                </StackLayout>
                                <StackLayout class="discount-box" orientation="vertical" horizontalAlignment="right">
                                    <Label text="{{ '-' + $value.discount + '%' }}" horizontalAlignment="center" />
                                </StackLayout>
                            </StackLayout>
                            <Image src="res://fa_angle_right" horizontalAlignment="right" style="horizontal-align:center;" verticalAlignment="middle" height="20vh" width="20vw" />
                        </StackLayout>
                    </Repeater.itemTemplate>
                </Repeater >
            </ScrollView>
        </StackLayout>
		<bottomNav:BottomNav-component top="546" left="0" />
	</AbsoluteLayout>
</Page>